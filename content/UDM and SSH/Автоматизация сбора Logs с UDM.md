Для автоматизации сбора логов с UDM на ПК можно использовать скрипт, который будет выполняться раз в неделю через планировщик задач (например, cron на Linux/macOS или Task Scheduler на Windows). Вот пошаговая инструкция:
___
1. Настройка SSH-ключа для подключения без пароля Чтобы автоматизировать процесс, нужно настроить вход по SSH-ключу. На вашем ПК: 1. Создайте SSH-ключ (если его ещё нет): ssh-keygen -t rsa -b 4096 По умолчанию ключ сохраняется в ~/.ssh/id_rsa. 
2. Передайте ваш публичный ключ на UDM: ssh-copy-id [root@192.168.1.1](https://root@192.168.1.1/) Введите пароль 1234, когда будет запрошено.
3. Проверьте, что вы можете подключиться без ввода пароля: ssh [root@192.168.1.1](https://root@192.168.1.1/) 
2. Написание скрипта для автоматизации
Создайте скрипт на вашем ПК, например, get_udm_[logs.sh](https://logs.sh/). Пример скрипта: #!/bin/bash # Переменные UDM_USER="root" UDM_IP="[192.168.1.1](https://192.168.1.1/)" LOG_DIR="/var/log" DEST_DIR="$HOME/Downloads/udm_logs" TODAY=$(date +%Y-%m-%d) # Создаём локальную папку для логов, если её нет mkdir -p "$DEST_DIR" # Фильтруем логи за текущий день и копируем их ssh $UDM_USER@$UDM_IP "grep '$TODAY' $LOG_DIR/system.log > /tmp/todays_system.log" scp $UDM_USER@$UDM_IP:/tmp/todays_system.log "$DEST_DIR/system_$TODAY.log" # Дополнительно: копирование всех логов, если нужно scp $UDM_USER@$UDM_IP:$LOG_DIR/* "$DEST_DIR/" echo "Логи за $TODAY успешно скопированы в $DEST_DIR" 
3. Настройка автоматического выполнения В зависимости от вашей операционной системы настройте выполнение этого скрипта раз в неделю. Linux/macOS: через cron 1. Откройте редактор задач cron: crontab -e 
4. Добавьте задачу для выполнения скрипта каждую неделю, например, по понедельникам в 10:00: 0 10 * * 1 /bin/bash /путь/к/get_udm_[logs.sh](https://logs.sh/) Windows: через Task Scheduler 1. Создайте задание в Task Scheduler. 
5. Укажите запуск скрипта с использованием PowerShell: bash.exe -c "/путь/к/get_udm_[logs.sh](https://logs.sh/)" 
6. Настройте расписание раз в неделю. 
7. Проверка работы Запустите скрипт вручную, чтобы убедиться, что он работает: bash /путь/к/get_udm_[logs.sh](https://logs.sh/) Проверьте, появились ли логи в указанной папке.